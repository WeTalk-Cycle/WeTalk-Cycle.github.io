(globalThis["webpackChunkbabeltalk"]=globalThis["webpackChunkbabeltalk"]||[]).push([[927],{4503:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>C});var o=i(9835);const n={class:"row text-center"},a={class:"col-12"},l={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},s={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},d={class:"col-12 text-center"},r=(0,o._)("div",{class:"col-6 text-center"}," two thirds ",-1),c=(0,o._)("div",{class:"col-6 text-center"}," one sixth ",-1);function u(e,t,i,u,m,p){const h=(0,o.up)("q-input"),g=(0,o.up)("q-btn"),b=(0,o.up)("q-spinner-audio"),f=(0,o.up)("q-toggle"),A=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(A,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",a,[(0,o._)("div",l,[(0,o.Wm)(h,{modelValue:m.ipAddress,"onUpdate:modelValue":t[0]||(t[0]=e=>m.ipAddress=e),label:"IP Address",class:"q-ma-md"},null,8,["modelValue"]),(0,o.Wm)(g,{color:"primary",icon:"sync",label:"Set IP",class:"q-ma-md",onClick:p.init},null,8,["onClick"])])]),(0,o._)("div",s,[(0,o.Wm)(h,{modelValue:m.timeSlice,"onUpdate:modelValue":t[1]||(t[1]=e=>m.timeSlice=e),modelModifiers:{number:!0},type:"number",label:"Time Slice",class:"q-ma-md"},null,8,["modelValue"])]),(0,o._)("div",d,[(0,o.Wm)(b,{color:"primary",size:"2em",id:"audio-spinner"}),(0,o.Wm)(f,{modelValue:m.recordVal,"onUpdate:modelValue":t[2]||(t[2]=e=>m.recordVal=e),color:"green"},null,8,["modelValue"])]),r,c])])),_:1})}i(3382);var m=i(3819),p=(i(7632),i(7779));const h={data(){return{audioSpinner:null,recordVal:!1,recordAudio:null,socketio:null,socket:null,timeSlice:100,ipAddress:"http://202.181.79.155:3000"}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://www.WebRTC-Experiment.com/RecordRTC.js"),document.head.appendChild(e),this.audioSpinner=document.getElementById("audio-spinner"),this.audioSpinner.pauseAnimations(),this.init()},methods:{init(){var e=this;null!=this.socketio&&this.socketio.disconnect(),p.log(this.ipAddress),this.socketio=(0,m.io)(this.ipAddress),this.socket=this.socketio.on("connect",(function(t){p.log("CONNECTED"),e.recordVal=!1})),this.socket=this.socketio.on("translated",(function(e){let t=new AudioContext({sampleRate:16e3});t.decodeAudioData(e["wave_data"]).then((e=>{var i=t.createBufferSource();i.buffer=e,i.connect(t.destination),i.start()}))}))}},watch:{recordVal(e,t){let i=this;alert(i.timeSlice),1==e?(i.audioSpinner.unpauseAnimations(),navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{i.recordAudio=RecordRTC(e,{type:"audio",mimeType:"audio/wav",desiredSampRate:16e3,recorderType:StereoAudioRecorder,numberOfAudioChannels:1,timeSlice:i.timeSlice,ondataavailable:function(e){i.socketio.emit("audio",e)}}),i.recordAudio.startRecording()}),(function(e){p.error(JSON.stringify(e))}))):(this.audioSpinner.pauseAnimations(),i.recordAudio.stopRecording((function(){})))}}};var g=i(1639),b=i(9885),f=i(6556),A=i(8556),k=i(5918),S=i(592),v=i(9984),w=i.n(v);const V=(0,g.Z)(h,[["render",u]]),C=V;w()(h,"components",{QPage:b.Z,QInput:f.Z,QBtn:A.Z,QSpinnerAudio:k.Z,QToggle:S.Z})},2361:()=>{},4616:()=>{}}]);