(globalThis["webpackChunkbabeltalk"]=globalThis["webpackChunkbabeltalk"]||[]).push([[468],{6374:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var o=i(9835);const n={class:"row text-center"},a={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},r={class:"col-12 text-center"},s=(0,o._)("div",{class:"col-6 text-center"}," two thirds ",-1),d=(0,o._)("div",{class:"col-6 text-center"}," one sixth ",-1);function l(e,t,i,l,c,u){const p=(0,o.up)("q-input"),m=(0,o.up)("q-btn"),h=(0,o.up)("q-spinner-audio"),g=(0,o.up)("q-toggle"),k=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(k,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",a,[(0,o.Wm)(p,{modelValue:c.ipAddress,"onUpdate:modelValue":t[0]||(t[0]=e=>c.ipAddress=e),label:"IP Address",class:"q-ma-md"},null,8,["modelValue"]),(0,o.Wm)(m,{color:"primary",icon:"sync",label:"Set IP",class:"q-ma-md",onClick:u.init},null,8,["onClick"])]),(0,o._)("div",r,[(0,o.Wm)(h,{color:"primary",size:"2em",id:"audio-spinner"}),(0,o.Wm)(g,{modelValue:c.recordVal,"onUpdate:modelValue":t[1]||(t[1]=e=>c.recordVal=e),color:"green"},null,8,["modelValue"])]),s,d])])),_:1})}i(3382);var c=i(3819),u=(i(7632),i(7779));const p={data(){return{audioSpinner:null,recordVal:!1,recordAudio:null,socketio:null,socket:null,ipAddress:"http://localhost:3000"}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://www.WebRTC-Experiment.com/RecordRTC.js"),document.head.appendChild(e),this.audioSpinner=document.getElementById("audio-spinner"),this.audioSpinner.pauseAnimations(),this.init()},methods:{init(){var e=this;null!=this.socketio&&this.socketio.disconnect(),this.socketio=(0,c.io)(this.ipAddress),this.socket=this.socketio.on("connect",(function(t){e.recordVal=!1})),this.socket=this.socketio.on("translated",(function(e){let t=new AudioContext({sampleRate:16e3});t.decodeAudioData(e["wave_data"]).then((e=>{var i=t.createBufferSource();i.buffer=e,i.connect(t.destination),i.start()}))}))}},watch:{recordVal(e,t){let i=this;1==e?(i.audioSpinner.unpauseAnimations(),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({audio:!0},(function(e){i.recordAudio=RecordRTC(e,{type:"audio",mimeType:"audio/wav",desiredSampRate:16e3,recorderType:StereoAudioRecorder,numberOfAudioChannels:1,timeSlice:100,ondataavailable:function(e){i.socketio.emit("audio",e)}}),i.recordAudio.startRecording()}),(function(e){u.error(JSON.stringify(e))}))):(this.audioSpinner.pauseAnimations(),i.recordAudio.stopRecording((function(){})))}}};var m=i(1639),h=i(9885),g=i(6556),k=i(8556),v=i(5918),A=i(592),b=i(9984),f=i.n(b);const w=(0,m.Z)(p,[["render",l]]),S=w;f()(p,"components",{QPage:h.Z,QInput:g.Z,QBtn:k.Z,QSpinnerAudio:v.Z,QToggle:A.Z})},2361:()=>{},4616:()=>{}}]);