(globalThis["webpackChunkbabeltalk"]=globalThis["webpackChunkbabeltalk"]||[]).push([[963],{7705:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>C});var i=o(9835);const n={class:"row text-center"},a={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},s={class:"col-12 text-center"},r=(0,i._)("div",{class:"col-6 text-center"}," two thirds ",-1),d=(0,i._)("div",{class:"col-6 text-center"}," one sixth ",-1);function l(e,t,o,l,c,u){const p=(0,i.up)("q-input"),m=(0,i.up)("q-btn"),h=(0,i.up)("q-spinner-audio"),g=(0,i.up)("q-toggle"),A=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(A,{class:"q-pa-md"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",a,[(0,i.Wm)(p,{modelValue:c.ipAddress,"onUpdate:modelValue":t[0]||(t[0]=e=>c.ipAddress=e),label:"IP Address",class:"q-ma-md"},null,8,["modelValue"]),(0,i.Wm)(m,{color:"primary",icon:"sync",label:"Set IP",class:"q-ma-md",onClick:u.init},null,8,["onClick"])]),(0,i._)("div",s,[(0,i.Wm)(h,{color:"primary",size:"2em",id:"audio-spinner"}),(0,i.Wm)(g,{modelValue:c.recordVal,"onUpdate:modelValue":t[1]||(t[1]=e=>c.recordVal=e),color:"green"},null,8,["modelValue"])]),r,d])])),_:1})}o(3382);var c=o(3819),u=(o(7632),o(7779));const p={data(){return{audioSpinner:null,recordVal:!1,recordAudio:null,socketio:null,socket:null,ipAddress:"http://202.181.79.155:3000"}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://www.WebRTC-Experiment.com/RecordRTC.js"),document.head.appendChild(e),this.audioSpinner=document.getElementById("audio-spinner"),this.audioSpinner.pauseAnimations(),this.init()},methods:{init(){var e=this;null!=this.socketio&&this.socketio.disconnect(),u.log(this.ipAddress),this.socketio=(0,c.io)(this.ipAddress),this.socket=this.socketio.on("connect",(function(t){u.log("CONNECTED"),e.recordVal=!1})),this.socket=this.socketio.on("translated",(function(e){let t=new AudioContext({sampleRate:16e3});t.decodeAudioData(e["wave_data"]).then((e=>{var o=t.createBufferSource();o.buffer=e,o.connect(t.destination),o.start()}))}))}},watch:{recordVal(e,t){let o=this;1==e?(o.audioSpinner.unpauseAnimations(),navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{o.recordAudio=RecordRTC(e,{type:"audio",mimeType:"audio/wav",desiredSampRate:16e3,recorderType:StereoAudioRecorder,numberOfAudioChannels:1,timeSlice:100,ondataavailable:function(e){o.socketio.emit("audio",e)}}),o.recordAudio.startRecording()}),(function(e){u.error(JSON.stringify(e))}))):(this.audioSpinner.pauseAnimations(),o.recordAudio.stopRecording((function(){})))}}};var m=o(1639),h=o(9885),g=o(6556),A=o(8556),k=o(5918),b=o(592),f=o(9984),v=o.n(f);const w=(0,m.Z)(p,[["render",l]]),C=w;v()(p,"components",{QPage:h.Z,QInput:g.Z,QBtn:A.Z,QSpinnerAudio:k.Z,QToggle:b.Z})},2361:()=>{},4616:()=>{}}]);