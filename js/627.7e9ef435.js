(globalThis["webpackChunkbabeltalk"]=globalThis["webpackChunkbabeltalk"]||[]).push([[627],{7096:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>R});var a=i(9835),o=i(6970);const l={class:"row text-center"},n={class:"col-12"},d={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},r={class:"flex",style:{width:"400px","margin-left":"auto","margin-right":"auto"}},s={class:"col-12 text-center"},u={class:"col-12 text-center q-mt-md"};function c(e,t,i,c,m,p){const g=(0,a.up)("q-input"),h=(0,a.up)("q-btn"),b=(0,a.up)("q-spinner-audio"),f=(0,a.up)("q-toggle"),w=(0,a.up)("q-item-label"),_=(0,a.up)("q-item-section"),k=(0,a.up)("q-item"),x=(0,a.up)("q-list"),A=(0,a.up)("q-page"),S=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(A,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("div",n,[(0,a._)("div",d,[(0,a.Wm)(g,{modelValue:m.ipAddress,"onUpdate:modelValue":t[0]||(t[0]=e=>m.ipAddress=e),label:"IP Address",class:"q-ma-md"},null,8,["modelValue"]),(0,a.Wm)(h,{color:"primary",icon:"sync",label:"Set IP",class:"q-ma-md",onClick:p.init},null,8,["onClick"])])]),(0,a._)("div",r,[(0,a.Wm)(g,{modelValue:m.timeSlice,"onUpdate:modelValue":t[1]||(t[1]=e=>m.timeSlice=e),modelModifiers:{number:!0},type:"number",label:"Time Slice",class:"q-ma-md"},null,8,["modelValue"])]),(0,a._)("div",s,[(0,a.Wm)(b,{color:"primary",size:"2em",id:"audio-spinner"}),(0,a.Wm)(f,{modelValue:m.recordVal,"onUpdate:modelValue":t[2]||(t[2]=e=>m.recordVal=e),color:"green"},null,8,["modelValue"])]),(0,a._)("div",u,[(0,a.Wm)(x,{bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.textData,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(k,{clickable:"",key:e.id},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.text_tgt),1)])),_:2},1024),(0,a.Wm)(w,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.text_src),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[S]]))),128))])),_:1})])])])),_:1})}i(3382);var m=i(3819),p=(i(7632),i(7779));const g={data(){return{audioSpinner:null,recordVal:!1,recordAudio:null,socketio:null,timeSlice:1e3,ipAddress:"http://202.181.79.155:3001",textData:[],debugDataIdx:0,debugInterval:null}},mounted(){let e=document.createElement("script");e.setAttribute("src","https://www.WebRTC-Experiment.com/RecordRTC.js"),document.head.appendChild(e),this.audioSpinner=document.getElementById("audio-spinner"),this.audioSpinner.pauseAnimations(),this.init()},methods:{init(){var e=this;null!=e.socketio&&e.socketio.disconnect(),p.log(e.ipAddress),e.socketio=(0,m.io)(e.ipAddress),e.socketio.on("connect",(function(t){p.log("CONNECTED"),e.recordVal=!1})),e.socketio.on("translated",(function(t){if(p.log(t),t["status"]&&"ok"==t["status"]){let i=t["language_src"],a=t["language_tgt"],o=t["text_src"],l=t["text_tgt"],n=t["speech_tgt"];p.log("test"),p.log(n),p.log("test");let d=new AudioContext({sampleRate:16e3});d.decodeAudioData(n).then((e=>{var t=d.createBufferSource();t.buffer=e,t.connect(d.destination),t.start()}));let r={language_src:i,language_tgt:a,text_src:o,text_tgt:l};e.textData.push(r)}else p.log("Some thing is wrong!!")}))}},watch:{recordVal(e,t){let i=this;1==e?(i.audioSpinner.unpauseAnimations(),navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{i.recordAudio=RecordRTC(e,{type:"audio",mimeType:"audio/wav",desiredSampRate:16e3,recorderType:StereoAudioRecorder,numberOfAudioChannels:1,timeSlice:i.timeSlice,ondataavailable:function(e){i.socketio.emit("audio",e)}}),i.recordAudio.startRecording()}),(function(e){p.error(JSON.stringify(e))}))):(this.audioSpinner.pauseAnimations(),i.recordAudio.stopRecording((function(){})))}}};var h=i(1639),b=i(9885),f=i(6556),w=i(9379),_=i(5918),k=i(592),x=i(3246),A=i(490),S=i(1233),v=i(3115),q=i(1136),V=i(9984),y=i.n(V);const C=(0,h.Z)(g,[["render",c]]),R=C;y()(g,"components",{QPage:b.Z,QInput:f.Z,QBtn:w.Z,QSpinnerAudio:_.Z,QToggle:k.Z,QList:x.Z,QItem:A.Z,QItemSection:S.Z,QItemLabel:v.Z}),y()(g,"directives",{Ripple:q.Z})},2361:()=>{},4616:()=>{}}]);